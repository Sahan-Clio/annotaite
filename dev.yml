version: "2.0"

commands:
  up:
    summary: "ğŸš€ Build & run everything"
    command: |
      echo "ğŸ³ Starting development environment..."
      docker compose up --build -d
      echo "âœ… Annot[AI]tor Services started!"
      echo "ğŸŒ Annot[AI]tor Frontend: http://localhost:5173"
      echo "ğŸ”Œ Annot[AI]tor Backend:  http://localhost:3001"
      
  down:
    summary: "ğŸ›‘ Stop & remove containers"
    command: |
      echo "ğŸ›‘ Stopping all services..."
      docker compose down -v
  api.console:
    summary: "ğŸ”Œ Open Rails console"
    command: |
      docker compose exec api rails c
      
  db.shell:
    summary: "ğŸ—„ï¸ Open MySQL shell"
    command: |
      docker compose exec db mysql -u rails -ppassword annot_development
      
  processor.start:
    summary: "ğŸ”§ Run processor pipeline"
    command: |
      cd processor && dev start $$@
      
  processor.server:
    summary: "ğŸŒ Start processor HTTP server"
    command: |
      cd processor && dev server
      
  processor.shell:
    summary: "ğŸš Open processor shell"
    command: |
      cd processor && dev shell
      
  processor.install:
    summary: "ğŸ“¦ Build processor container"
    command: |
      cd processor && dev install
      
  processor.test:
    summary: "ğŸ§ª Run processor tests"
    command: |
      cd processor && dev test
      
  test:
    summary: "ğŸ§ª Run all tests across all services"
    command: |
      echo "ğŸ§ª Running server tests..."
      cd server && dev test
      echo "âœ… Server tests completed"
      echo "ğŸ§ª Running client tests..."
      cd client && dev test
      echo "âœ… Client tests completed"
      echo "ğŸ§ª Running processor tests..."
      cd processor && dev test
      echo "âœ… Processor tests completed"
      echo "ğŸ‰ All tests completed!" 